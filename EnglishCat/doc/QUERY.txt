
-- 사용자 정보 LOAD 시
SELECT
	USER_ID
	, USER_NAME
	, USER_PHONE
	, USER_MAIL
	, USER_ADDRESS
	, USER_ZIPCODE
	, INSERT_DT
FROM TB_USER_INFO
WHERE 1=1
  AND DELETE_YN <> 'Y'
  AND AUTH_GROUP LIKE 'USER';

-- 사용자정보 입력
INSERT INTO TB_USER_INFO
	*
VALUES ('아이디', '패스워드', '이름', '저나버노', '멜','주소','우편버노'
	'USER', SYSDATE(), NULL, NULL);

-- 사용자 정보 LIST 조회
SELECT
	USER_ID
	, USER_NAME
	, INSERT_DT
	, UPDATE_DT
	, AUTH_GROUP
FROM TB_USER_INFO
WHERE AUTH_GROUP LIKE 'USER'

-- 사용자 비번 초기화
UPDATE TB_USER_INFO
SET USER_PASS = NULL
WHERE USER_ID = '아이디';

-- 공지사항 글 상세 조회
SELECT
	CONT_ID
	, CONT_TITLE
	, CONT_CONTENT
	, (
		SELECT USER_NAME
		FROM TB_USER_INFO B
		WHERE B.USER_ID = A.USER_ID
		) AS USER_NAME
	, CONT_READ_CNT
	, CONT_LIKE_CNT
	, CONT_DIS_CNT
	, NVL(UPDATE_DT, INSERT_DT) AS UPDATE_DT
FROM TB_CONT_REVIEW AS A
WHERE 1=1
  AND DELETE_YN <> 'Y';

-- 공지사항 글 수정 시
UPDATE TB_CONT_REVIEW
SET CONT_TITLE = #cont_title#
	, CONT_CONTENT = #cont_content#
	, UPDATE_DT = SYSDATE()
WHERE CONT_ID = #cont_id#;

-- 공지사항 글 조회 시 COUNT 증가
UPDATE TB_CONT_REVIEW
SET CONT_READ_CNT = CONT_READ_CNT + 1
WHERE CONT_ID = #cont_id#;

